<html>
    <head>
        <title>Oswell's Avatar</title>
        <style>
            canvas{
                border:1px solid black;
            }
            body{
                margin:0;
            }
            #sliders{
                position:absolute;
                top:0;
                left:850;
            }
        </style>
    </head>
    <body>
        <canvas id="myCanvas"></canvas>
        <div id="sliders">
            <input type="range" id="Ax" min="-1" max="1" step="0.1" onChange="updatePoint(this, 'x')"/>
            <input type="range" id="Ay" min="-1" max="1" step="0.01" onChange="updatePoint(this, 'y')"/>
        </div>
        <script>
            const canvas=document.getElementById("myCanvas");
            canvas.width=800;
            canvas.height=500; 
            
            const ctx=canvas.getContext("2d");
            ctx.translate(canvas.width/2, canvas.height/2);
            ctx.scale(canvas.width*0.5, canvas.height*0.5);
            ctx.lineWidth=0.005;
            const img=new Image();
            img.src="oswel.avif";

            const A = {x:0, y:-0.040, xRange:[0, 0.2], yRange:[-0.040,0.1]};

            img.onload=function(){
                animate();
            }

            canvas.addEventListener("click", getCoords);

            function animate(){
                ctx.clearRect(-1,-1,2,2);
                ctx.globalAlpha=0.2;
                ctx.drawImage(img,-1,-1,2,2);
                ctx.globalAlpha=1;
                drawMe();
                requestAnimationFrame(animate);
            }

            function getCoords(evt) {
                const x = (evt.x-canvas.width/2)/(canvas.width/2);
                const y = (evt.y-canvas.height/2)/(canvas.height/2)
                console.log(x.toFixed(2)+","+y.toFixed(2));
            }

            function drawMe() {
                drawAxis();
                drawHead();
                drawEyes();
                drawBody();
                // Drawing Nose
                // Drawing Mouth
                drawPoint(A, "A");
            }

            function drawAxis() {
                // Draw the Axis References.
                ctx.beginPath();
                // Vertical Line
                ctx.moveTo(0,-0.8);
                ctx.quadraticCurveTo(A.x,A.y,0,0.6);
                // Horizontal Line
                ctx.moveTo(-0.25,-0.040);
                ctx.quadraticCurveTo(A.x,A.y,0.25,-0.040);
                ctx.stroke();
            }

            function drawHead() {
                // Draw Face Boundaries
                ctx.beginPath();
                // Drawing Top Left Boundary
                ctx.moveTo(-0.23,-0.040);
                ctx.quadraticCurveTo(-0.28,-0.41,-0.15,-0.63);
                ctx.moveTo(-0.15,-0.63);
                ctx.lineTo(-0.15,-0.70);
                // Drawing Interior Lines
                ctx.lineTo(-0.13,-0.41);
                ctx.moveTo(-0.15,-0.70);
                ctx.quadraticCurveTo(-0.09,-0.77,0,-0.8);
                ctx.moveTo(-0.13,-0.41);
                ctx.quadraticCurveTo(-0.11,-0.28,-0.06,-0.17);
                ctx.moveTo(-0.06,-0.17);
                ctx.quadraticCurveTo(-0.06,-0.11,-0.02,-0.04);
                // Drawing Top Right Boundary
                ctx.moveTo(0.23, -0.040);
                ctx.quadraticCurveTo(0.28,-0.41,0.15,-0.63);
                ctx.moveTo(0.15,-0.63);
                ctx.lineTo(0.15,-0.70);
                // Drawing Interior Lines
                ctx.lineTo(0.13,-0.41);
                ctx.moveTo(0.15,-0.70);
                ctx.quadraticCurveTo(0.09,-0.77,0,-0.8);
                ctx.moveTo(0.13,-0.41);
                ctx.quadraticCurveTo(0.11,-0.28,0.06,-0.17);
                ctx.moveTo(0.06,-0.17);
                ctx.quadraticCurveTo(0.06,-0.11,0.02,-0.04);
                // Drawing Bottom Left Boundary
                ctx.moveTo(-0.23,-0.040);
                ctx.lineTo(-0.23,0.06);
                ctx.moveTo(-0.23,0.06);
                ctx.quadraticCurveTo(-0.21,0.18,-0.15,0.30);
                ctx.moveTo(-0.15,0.30);
                ctx.lineTo(-0.08,0.50);
                ctx.moveTo(-0.15,0.30);
                ctx.quadraticCurveTo(-0.14,0.40,-0.10,0.49);
                ctx.moveTo(-0.10,0.49);
                ctx.quadraticCurveTo(-0.07,0.58,0,0.6);
                // Drawing Bottom Right Boundary
                ctx.moveTo(0.23,-0.040);
                ctx.lineTo(0.23, 0.06);
                ctx.moveTo(0.23,0.06);
                ctx.quadraticCurveTo(0.21,0.18,0.15,0.30);
                ctx.moveTo(0.15,0.30);
                ctx.lineTo(0.08,0.50);
                ctx.moveTo(0.15,0.30);
                ctx.quadraticCurveTo(0.14,0.40,0.10,0.49);
                ctx.moveTo(0.10,0.49);
                ctx.quadraticCurveTo(0.07,0.58,0,0.6);
                ctx.stroke();
            }

            function drawEyes() {
                ctx.beginPath();
                // Drawing Eyes
                ctx.moveTo(-0.02,-0.04);
                ctx.quadraticCurveTo(0.00,-0.05,0.02,-0.04);
                ctx.moveTo(-0.04,0.02);
                ctx.quadraticCurveTo(0.00,-0.01,0.04,0.02);
                // Drawing Left Eye
                ctx.moveTo(-0.02,-0.04);
                ctx.lineTo(-0.06,0.00);
                ctx.moveTo(-0.04,0.06);
                ctx.quadraticCurveTo(-0.11,0.17,-0.18,0.23);
                // Drawing Right Eye
                ctx.moveTo(0.02,-0.04);
                ctx.lineTo(0.06,0.00);
                ctx.moveTo(0.04,0.06);
                ctx.quadraticCurveTo(0.11,0.17,0.18,0.23);
                ctx.stroke();
            }

            function drawBody() {
                ctx.beginPath();
                // Drawing Neck
                ctx.moveTo(-0.07,0.55);
                ctx.quadraticCurveTo(-0.05,0.70,-0.06,0.80);
                ctx.moveTo(0.07,0.55);
                ctx.quadraticCurveTo(0.05,0.70,0.06,0.80);
                ctx.stroke();
            }

            function drawPoint(loc,label,rad=0.04){
                ctx.beginPath();
                ctx.arc(loc.x,loc.y,rad,0,Math.PI*2);
                ctx.stroke();
                ctx.fillStyle="green";
                ctx.fill();
                ctx.fillStyle="white";
                ctx.font=(rad*1.6)+"px Arial";
                ctx.textAlign="center";
                ctx.textBaseline="middle";
                ctx.fillText(label, loc.x, loc.y+rad*0.15);
            }

            function updatePoint(info, attr){
                console.log(info.value);
                switch(attr){
                    case "x":
                        A.x=lerp(A.xRange[0], A.xRange[1],info.value);
                        break;
                    case "y":
                        A.y=lerp(A.yRange[0], A.yRange[1],info.value);
                        break;
                }
                
            }

            function lerp(start, end, percentage){
                // Linear Interpolation
                return start+(end-start)*percentage;
            }

        </script>
    </body>
</html>